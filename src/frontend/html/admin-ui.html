<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Admin – JamieAI 1.0 Enhanced</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="../css/admin-ui.css">
</head>
<body>
    <!-- Pete Logo Header -->
    <div style="text-align:center;padding:15px;background:white;border-bottom:2px solid #007acc;margin-bottom:20px;">
        <img src="/public/pete.png" alt="PeteOllama Logo" style="height:60px;"/>
        <h2 style="margin:5px 0 0 0;color:#007acc;">PeteOllama</h2>
    </div>

    <div class="container">
        <div class="nav-links" style="margin-bottom:20px;text-align:center;">
            <a href="/admin" style="margin:0 15px;color:#007acc;text-decoration:none;font-weight:bold;">Dashboard</a>
            <a href="/admin/settings" style="margin:0 15px;color:#007acc;text-decoration:none;font-weight:bold;">Settings</a>
            <a href="/admin/stats" style="margin:0 15px;color:#007acc;text-decoration:none;font-weight:bold;">Stats</a>
            <a href="/ui" style="margin:0 15px;color:#007acc;text-decoration:none;font-weight:bold;">Main UI</a>
        </div>

        <h1>🤖 JamieAI 1.0 – Enhanced Testing Dashboard</h1>

        <!-- Environment Indicator -->
        <div id="environmentIndicator" style="text-align:center;padding:10px;margin:10px 0;border-radius:6px;font-weight:bold;font-size:16px;">
            <span id="envStatus">🔄 Detecting Environment...</span>
            <span id="envDetails" style="font-size:12px;margin-left:15px;font-weight:normal;"></span>
        </div>

        <div class="section">
            <h3>📚 Training Data</h3>
            <p>Preview training samples pulled from pete.db</p>
            <button id="refresh">Load Samples</button>
            <button id="train">Train Property-Manager Model</button>
            <div id="samples"></div>
            <h4>Training Log</h4>
            <div id="log"></div>
        </div>

        <div class="section">
            <h3>🧪 Model Testing & Comparison</h3>
            <p>Test different Jamie models with GPU acceleration and preloading</p>

            <div style="margin-bottom:15px;padding:10px;background:#e3f2fd;border-radius:4px">
                <h4>🚀 Smart Model Loading</h4>
                <p style="font-size:12px;margin:5px 0">Models are loaded into memory when selected for 10x faster response times</p>
                <div id="loadingStatus" style="margin:10px 0;padding:8px;background:#fff;border-radius:4px;display:none">
                    <div style="color:#007acc;font-weight:bold">🔄 Loading model into memory...</div>
                    <div style="font-size:11px;color:#666;margin-top:3px">Please wait about 1 minute before testing. Model will stay loaded until you switch.</div>
                </div>
                <button id="checkModelStatus" style="font-size:12px">📊 Check Model Status</button>
                <div id="modelStatusDisplay" style="margin-top:10px;font-size:12px"></div>
            </div>

            <div style="margin-bottom:15px">
                <label>Select Model:</label>
                <select id="modelSelect">
                    <option value="llama3:latest">Base Model (llama3:latest)</option>
                    <option value="peteollama:jamie-simple">Jamie Simple</option>
                    <option value="peteollama:jamie-voice-complete">Jamie Voice Complete</option>
                    <option value="peteollama:jamie-working-working_20250806">Jamie Working</option>
                    <option value="peteollama:jamie-fixed">Jamie Fixed (Latest)</option>
                </select>
                <span class="performance" id="modelInfo">Select a model to load and test</span>
            </div>

            <div style="margin-bottom:15px">
                <label>Test Message:</label>
                <input type="text" id="testMessage" placeholder="Enter test message..." value="My AC stopped working">
                <button id="runTest">🚀 Test Model</button>
                <button id="runAllTests">📊 Run All Test Cases</button>
            </div>

            <div style="margin-bottom:15px">
                <h4>🎯 Quick Test Cases (click to use):</h4>
                <div class="test-case" onclick="setTestMessage(this.textContent)">My AC stopped working this morning</div>
                <div class="test-case" onclick="setTestMessage(this.textContent)">My toilet is leaking water on the floor</div>
                <div class="test-case" onclick="setTestMessage(this.textContent)">When is my rent due this month?</div>
                <div class="test-case" onclick="setTestMessage(this.textContent)">The garbage disposal isn't working</div>
                <div class="test-case" onclick="setTestMessage(this.textContent)">My neighbor is being too loud at night</div>
                <div class="test-case" onclick="setTestMessage(this.textContent)">I need to pay my rent but the portal is down</div>
            </div>

            <div id="testOutput"></div>
        </div>

        <div class="section">
            <h3>💬 Conversation Testing</h3>
            <p>Test ongoing conversations with context preservation and analysis</p>

            <div style="margin-bottom:15px">
                <label>Conversation Model:</label>
                <select id="conversationModel">
                    <option value="peteollama:jamie-fixed">Jamie Fixed (Latest)</option>
                    <option value="peteollama:jamie-simple">Jamie Simple</option>
                    <option value="peteollama:jamie-voice-complete">Jamie Voice Complete</option>
                    <option value="llama3:latest">Base Model (llama3:latest)</option>
                </select>

        <div class="section">
            <h3>⚙️ Configuration Management</h3>
            <p>View and manage environment variables, configuration settings, and system configuration</p>
            
            <div style="margin-bottom:15px">
                <h4>🔑 Environment Variables</h4>
                <button id="loadEnvVars">📋 Load Environment Variables</button>
                <div id="envVarsDisplay" style="margin-top:10px;font-size:12px;background:#f5f5f5;padding:10px;border-radius:4px;display:none;"></div>
            </div>

            <div style="margin-bottom:15px">
                <h4>⚙️ Configuration Settings</h4>
                <button id="loadConfig">📊 Load Configuration</button>
                <div id="configDisplay" style="margin-top:10px;font-size:12px;background:#f5f5f5;padding:10px;border-radius:4px;display:none;"></div>
            </div>

            <div style="margin-bottom:15px">
                <h4>📤 Export Configuration</h4>
                <button id="exportConfig">💾 Export Full Config</button>
                <div id="exportDisplay" style="margin-top:10px;font-size:12px;background:#f5f5f5;padding:10px;border-radius:4px;display:none;"></div>
            </div>

            <div style="margin-bottom:15px">
                <h4>✏️ Update Configuration</h4>
                <div style="background:#e3f2fd;padding:10px;border-radius:4px;margin-bottom:10px;">
                    <p style="font-size:12px;margin:5px 0">Update configuration settings (changes are saved immediately)</p>
                </div>
                
                <div style="display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:10px;margin-bottom:10px;">
                    <select id="configSection">
                        <option value="provider">Provider Settings</option>
                        <option value="model">Model Settings</option>
                    </select>
                    <input type="text" id="configKey" placeholder="Configuration key">
                    <input type="text" id="configValue" placeholder="New value">
                    <button id="updateConfig">🔄 Update</button>
                </div>
                
                <div id="updateResult" style="margin-top:10px;font-size:12px;display:none;"></div>
            </div>
        </div>
                <button id="startNewConversation">🆕 Start New Conversation</button>
                <button id="clearConversation">🗑️ Clear History</button>
            </div>

            <div style="margin-bottom:15px">
                <input type="text" id="conversationMessage" placeholder="Type your message here..." style="width:70%">
                <button id="sendConversationMessage">💬 Send Message</button>
            </div>

            <div id="conversationHistory" style="height:400px;border:1px solid #ccc;overflow:auto;padding:10px;margin:10px 0;background:white;font-family:Arial,sans-serif"></div>

            <div id="conversationAnalysis" style="background:#f8f9fa;padding:10px;border-radius:4px;margin:10px 0;display:none">
                <h4>🧠 Agent Analysis</h4>
                <div id="analysisContent"></div>
            </div>
        </div>
    </div>

    <script src="../js/admin-ui.js"></script>
</body>
</html>
